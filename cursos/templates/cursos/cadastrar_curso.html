{% extends 'cursos/base.html' %}

{% block conteudo %}
<div class="main-container" style="max-width: 800px; margin: 0 auto; padding: 40px 20px;">
    
    <div style="margin-bottom: 30px;">
        <a href="{% url 'painel_coordenador' %}" style="color: #a29bfe; text-decoration: none;">
            <i class="fas fa-arrow-left"></i> Voltar ao Painel
        </a>
    </div>

    <div class="glass-card" style="padding: 40px;">
        <h2 style="color: #ffcc00; margin-bottom: 10px;">
            <i class="fas fa-university"></i> Cadastrar Novo Curso
        </h2>
        <p style="color: #aaa; margin-bottom: 30px;">
            Crie a categoria principal (ex: Violino, Teclado, Sopros) para organizar os materiais.
        </p>

        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            {% for field in form %}
                <div style="margin-bottom: 25px;">
                    <label style="color: #fff; display: block; margin-bottom: 8px; font-weight: 500;">
                        {{ field.label }}
                    </label>
                    {{ field }}
                    {% if field.help_text %}
                        <small style="color: #666; display: block; mt-1">{{ field.help_text }}</small>
                    {% endif %}
                    {% if field.errors %}
                        <div style="color: #ff4757; font-size: 0.85rem; margin-top: 5px;">
                            {{ field.errors }}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 40px;">
                <button type="submit" class="btn-entrar" style="width: 100%; padding: 15px;">
                    <i class="fas fa-check-circle"></i> Salvar Curso
                </button>
                <a href="{% url 'painel_coordenador' %}" class="nav-link" 
                   style="text-align: center; border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.05);">
                    Cancelar
                </a>
            </div>
        </form>
    </div>
</div>

{# SCRIPT PARA GERAR SLUG AUTOM√ÅTICO #}
<script>
    const nomeInput = document.querySelector('input[name="nome"]');
    const slugInput = document.querySelector('input[name="slug"]');

    if(nomeInput && slugInput) {
        nomeInput.addEventListener('keyup', () => {
            let texto = nomeInput.value;
            let slug = texto.toLowerCase()
                            .replace(/[^\w ]+/g, '')
                            .replace(/ +/g, '-');
            slugInput.value = slug;
        });
    }
</script>

<style>
    /* Garante que os inputs sigam o estilo glass */
    .input-glass {
        width: 100%;
        background: rgba(255, 255, 255, 0.05) !important;
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
        border-radius: 12px !important;
        padding: 12px 15px !important;
        color: white !important;
        outline: none !important;
        transition: 0.3s !important;
    }

    .input-glass:focus {
        border-color: #a29bfe !important;
        background: rgba(255, 255, 255, 0.1) !important;
        box-shadow: 0 0 15px rgba(162, 155, 254, 0.2);
    }
</style>
{% endblock %}